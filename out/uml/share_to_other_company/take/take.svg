<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="611px" preserveAspectRatio="none" style="width:635px;height:611px;background:#FFFFFF;" version="1.1" viewBox="0 0 635 611" width="635px" zoomAndPan="magnify"><defs><filter height="300%" id="fk2krjw87xgli" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fk2krjw87xgli)" height="64.6211" style="stroke:#A80036;stroke-width:1.0;" width="10" x="39" y="324.5938"/><rect fill="#FFFFFF" filter="url(#fk2krjw87xgli)" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="262" y="71.7988"/><rect fill="#FFFFFF" filter="url(#fk2krjw87xgli)" height="246.1289" style="stroke:#A80036;stroke-width:1.0;" width="10" x="262" y="223.6621"/><rect fill="#FFFFFF" filter="url(#fk2krjw87xgli)" height="63.6211" style="stroke:#A80036;stroke-width:1.0;" width="10" x="267" y="290.2832"/><rect fill="#FFFFFF" filter="url(#fk2krjw87xgli)" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="267" y="440.4805"/><rect fill="#FFFFFF" filter="url(#fk2krjw87xgli)" height="234.1289" style="stroke:#000000;stroke-width:2.0;" width="611" x="10" y="243.6621"/><rect fill="#FFFFFF" height="73.5762" style="stroke:none;stroke-width:1.0;" width="611" x="10" y="404.2148"/><rect fill="#FFFFFF" filter="url(#fk2krjw87xgli)" height="59.6211" style="stroke:#000000;stroke-width:2.0;" width="380" x="10" y="491.791"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="44" x2="44" y1="40.4883" y2="568.4121"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="266.5" x2="266.5" y1="40.4883" y2="568.4121"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="578" x2="578" y1="40.4883" y2="568.4121"/><rect fill="#FEFECE" filter="url(#fk2krjw87xgli)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="44" x="20" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="27" y="25.5352">ZOO</text><rect fill="#FEFECE" filter="url(#fk2krjw87xgli)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="44" x="20" y="567.4121"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="27" y="587.9473">ZOO</text><rect fill="#FEFECE" filter="url(#fk2krjw87xgli)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="69" x="230.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="237.5" y="25.5352">GORELA</text><rect fill="#FEFECE" filter="url(#fk2krjw87xgli)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="69" x="230.5" y="567.4121"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="237.5" y="587.9473">GORELA</text><rect fill="#FEFECE" filter="url(#fk2krjw87xgli)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="62" x="545" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="552" y="25.5352">타배대사</text><rect fill="#FEFECE" filter="url(#fk2krjw87xgli)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="62" x="545" y="567.4121"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="552" y="587.9473">타배대사</text><rect fill="#FFFFFF" filter="url(#fk2krjw87xgli)" height="64.6211" style="stroke:#A80036;stroke-width:1.0;" width="10" x="39" y="324.5938"/><rect fill="#FFFFFF" filter="url(#fk2krjw87xgli)" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="262" y="71.7988"/><rect fill="#FFFFFF" filter="url(#fk2krjw87xgli)" height="246.1289" style="stroke:#A80036;stroke-width:1.0;" width="10" x="262" y="223.6621"/><rect fill="#FFFFFF" filter="url(#fk2krjw87xgli)" height="63.6211" style="stroke:#A80036;stroke-width:1.0;" width="10" x="267" y="290.2832"/><rect fill="#FFFFFF" filter="url(#fk2krjw87xgli)" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="267" y="440.4805"/><polygon fill="#A80036" points="283,67.7988,273,71.7988,283,75.7988,279,71.7988" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="277" x2="577" y1="71.7988" y2="71.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="289" y="67.0566">오더공유</text><polygon fill="#A80036" points="55,97.1094,45,101.1094,55,105.1094,51,101.1094" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="49" x2="266" y1="101.1094" y2="101.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="61" y="96.3672">(open api) 오더공유</text><path d="M49,114.1094 L49,185.1094 L374,185.1094 L374,124.1094 L364,114.1094 L49,114.1094 " fill="#FBFB77" filter="url(#fk2krjw87xgli)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M364,114.1094 L364,124.1094 L374,124.1094 L364,114.1094 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="304" x="55" y="131.6777">ZOO 에는 "타배대사 발주허브"가 발주한 형식으로 들어온다</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="55" y="146.9883">배달대행료는 타배대사에서 정해서 내려준다</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="251" x="55" y="162.2988">typeCode = 'otherCompany'(?) 로 들어온다</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="241" x="55" y="177.6094">이때 order.storeId 는 없다 (퀵처럼 위치기반)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="267" x2="314" y1="210.6621" y2="210.6621"/><line style="stroke:#A80036;stroke-width:1.0;" x1="314" x2="314" y1="210.6621" y2="223.6621"/><line style="stroke:#A80036;stroke-width:1.0;" x1="273" x2="314" y1="223.6621" y2="223.6621"/><polygon fill="#A80036" points="283,219.6621,273,223.6621,283,227.6621,279,223.6621" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20" x="279" y="205.9199">n초</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="299" y="205.9199">간 배차 이벤트 수신대기</text><path d="M10,243.6621 L72,243.6621 L72,250.6621 L62,260.6621 L10,260.6621 L10,243.6621 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="234.1289" style="stroke:#000000;stroke-width:2.0;" width="611" x="10" y="243.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="257.2305">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="87" y="256.2969">[</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="17" x="91" y="256.2969">n초</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="155" x="112" y="256.2969">내에 ZOO 에서 배차가 안된경우]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="272" x2="319" y1="277.2832" y2="277.2832"/><line style="stroke:#A80036;stroke-width:1.0;" x1="319" x2="319" y1="277.2832" y2="290.2832"/><line style="stroke:#A80036;stroke-width:1.0;" x1="278" x2="319" y1="290.2832" y2="290.2832"/><polygon fill="#A80036" points="288,286.2832,278,290.2832,288,294.2832,284,290.2832" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="284" y="272.541">[</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20" x="288" y="272.541">n초</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="312" y="272.541">경과시] 배차 이벤트 안오네?</text><polygon fill="#A80036" points="60,320.5938,50,324.5938,60,328.5938,56,324.5938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="54" x2="266" y1="324.5938" y2="324.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="66" y="319.8516">"이제 공유 그만할게요"</text><polygon fill="#A80036" points="566,349.9043,576,353.9043,566,357.9043,570,353.9043" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="272" x2="572" y1="353.9043" y2="353.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="277" x="279" y="349.1621">"바로고도 배차 안되네요... 이제 알아서 하세요" 이벤트</text><line style="stroke:#A80036;stroke-width:1.0;" x1="49" x2="91" y1="388.2148" y2="388.2148"/><line style="stroke:#A80036;stroke-width:1.0;" x1="91" x2="91" y1="388.2148" y2="401.2148"/><line style="stroke:#A80036;stroke-width:1.0;" x1="44" x2="91" y1="401.2148" y2="401.2148"/><polygon fill="#A80036" points="54,397.2148,44,401.2148,54,405.2148,50,401.2148" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48" x="56" y="383.4727">오더 취소</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="621" y1="405.2148" y2="405.2148"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="125" x="15" y="415.8496">[ZOO 에서 배차가 된경우]</text><polygon fill="#A80036" points="255,436.4805,265,440.4805,255,444.4805,259,440.4805" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="44" x2="261" y1="440.4805" y2="440.4805"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="51" y="435.7383">배차, 픽업, 완료 등 이벤트</text><polygon fill="#A80036" points="566,465.791,576,469.791,566,473.791,570,469.791" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="267" x2="572" y1="469.791" y2="469.791"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="274" y="465.0488">배차, 픽업, 완료 등 이벤트</text><path d="M10,491.791 L72,491.791 L72,498.791 L62,508.791 L10,508.791 L10,491.791 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="59.6211" style="stroke:#000000;stroke-width:2.0;" width="380" x="10" y="491.791"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="505.3594">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="298" x="87" y="504.4258">[typeCode = 'otherCompany'(?) 오더의 완료이벤트 발생시]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="44" x2="86" y1="530.4121" y2="530.4121"/><line style="stroke:#A80036;stroke-width:1.0;" x1="86" x2="86" y1="530.4121" y2="543.4121"/><line style="stroke:#A80036;stroke-width:1.0;" x1="45" x2="86" y1="543.4121" y2="543.4121"/><polygon fill="#A80036" points="55,539.4121,45,543.4121,55,547.4121,51,543.4121" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="209" x="51" y="525.6699">별도의 정산 프로시저 (05) 에서 처리한다</text><!--MD5=[4b070df9b49015fd7fd69c62d4c6918a]
@startuml
participant ZOO as ZOO
participant GORELA as GORELA
participant 타배대사 as 타배대사

타배대사 -> GORELA ++ : 오더공유
GORELA -> ZOO : (open api) 오더공유
note right of ZOO
    ZOO 에는 "타배대사 발주허브"가 발주한 형식으로 들어온다
    배달대행료는 타배대사에서 정해서 내려준다
    typeCode = 'otherCompany'(?) 로 들어온다
    이때 order.storeId 는 없다 (퀵처럼 위치기반)
end note
deactivate

GORELA -> GORELA ++ : **n초**간 배차 이벤트 수신대기
alt **n초** 내에 ZOO 에서 배차가 안된경우
    GORELA -> GORELA ++ : [**n초** 경과시] 배차 이벤트 안오네?
    GORELA -> ZOO ++  : "이제 공유 그만할게요"
    GORELA -> 타배대사 : "바로고도 배차 안되네요... 이제 알아서 하세요" 이벤트
    deactivate GORELA
    ZOO -> ZOO : 오더 취소
    deactivate ZOO
else ZOO 에서 배차가 된경우
    ZOO -> GORELA ++  : 배차, 픽업, 완료 등 이벤트
    GORELA -> 타배대사 : 배차, 픽업, 완료 등 이벤트
    deactivate GORELA
    deactivate GORELA
end

alt  typeCode = 'otherCompany'(?) 오더의 완료이벤트 발생시
    ZOO -> ZOO : 별도의 정산 프로시저 (05) 에서 처리한다
end
@enduml

PlantUML version 1.2022.0(Wed Jan 12 01:16:42 KST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: KR
--></g></svg>